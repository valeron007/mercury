if(typeof GH==="undefined"){window.GH={}}if(typeof GH.view=="undefined"){GH.view={}}if(typeof GH.view.model=="undefined"){GH.view.model={}}if(typeof GH.Global=="undefined"){GH.Global={}}if(typeof GH.Dialog=="undefined"){GH.Dialog={}}if(typeof GH.Dialogs=="undefined"){GH.Dialogs={}}if(typeof GH.State=="undefined"){GH.State={}}if(typeof GH.XBoard=="undefined"){GH.XBoard={}}if(typeof GH.RapidBoard=="undefined"){GH.RapidBoard={}}if(typeof GH.HelpPaths=="undefined"){GH.HelpPaths={}}if(typeof GH.JQLAutoComplete=="undefined"){GH.JQLAutoComplete={}}if(typeof GH.RapidBoard.Util=="undefined"){GH.RapidBoard.Util={}}if(typeof GH.NumberFormat=="undefined"){GH.NumberFormat={}}if(typeof GH.UrlFormat=="undefined"){GH.UrlFormat={}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(C,D){for(var B=(D||0),A=this.length;B<A;B++){if(this[B]===C){return B}}return -1}}AJS.format=function(I){var B=/'(?!')/g,H=/^\d+$/,E=/^(\d+),number$/,C=/^(\d+)\,choice\,(.+)/,G=/^(\d+)([#<])(.+)/;var F=function(R,P){var O="",M;if(M=R.match(H)){O=P.length>++R?P[R]:""}else{if(M=R.match(E)){O=P.length>++M[1]?P[M[1]]:""}else{if(M=R.match(C)){var S=(P.length>++M[1]?P[M[1]]:null);if(S!==null){var T=M[2].split("|");var N=null;for(var L=0;L<T.length;L++){var K=T[L].match(G);var Q=parseInt(K[1],10);if(S<Q){if(N){O=N;break}else{O=K[3];break}}if(S==Q&&K[2]=="#"){O=K[3];break}else{}if(L==T.length-1){O=K[3]}N=K[3]}var J=[O].concat(Array.prototype.slice.call(P,1));O=AJS.format.apply(AJS,J)}}}}return O};var D=function(O){var M=false,J=-1,N=0;for(var L=0;L<O.length;L++){var P=O.charAt(L);if(P=="'"){M=!M}if(M){continue}if(P==="{"){if(N===0){J=L}N++}else{if(P==="}"){if(N>0){N--;if(N===0){var K=[];K.push(O.substring(0,L+1));K.push(O.substring(0,J));K.push(O.substring(J+1,L));return K}}}}}return null};var A=function(M){var K=arguments,L="",J=D(M);while(J){M=M.substring(J[0].length);L+=J[1].replace(B,"");L+=F(J[2],K);J=D(M)}L+=M.replace(B,"");return L};return A.apply(AJS,arguments)};
GH.Notification={};GH.Notification.showErrors=function(D,A){var B=GH.Notification.prepareNotificationDiv();var C=GH.tpl.rapid.notification.renderErrorMessages(D);if(typeof A=="undefined"){A=true}AJS.messages.error(B,{title:"Error",body:C,closeable:A});if(GH.Notification._divStyle(B)){B.css(GH.Notification._divStyle(B))}B.show()};GH.Notification.showWarnings=function(F,E){var B={autoHide:true,autoHideDelay:5000,preRendered:false,showTitle:false};E=_.extend({},B,E);var C=GH.Notification.prepareNotificationDiv();var A;if(!E.preRendered){A=GH.tpl.rapid.notification.renderErrorMessages({errors:F})}else{A=F}var D={body:A,closeable:true};if(E.showTitle){D.title="Warning"}AJS.messages.warning(C,D);if(GH.Notification._divStyle(C)){C.css(GH.Notification._divStyle(C))}C.show();if(E.autoHide){setTimeout(function(){C.hide()},E.autoHideDelay)}};GH.Notification.showWarning=function(B){var A=GH.Notification.prepareNotificationDiv();AJS.messages.warning(A,{body:B,closeable:true});if(GH.Notification._divStyle(A)){A.css(GH.Notification._divStyle(A))}A.show()};GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()};GH.Notification.fadeElement=function(B,E,G){var C=AJS.$(B);var A=E||"#fff";var G=G||"#d6d6d6";var D="#ffd";var F="#f7df92";AJS.$(C).stop().animate({"background-color":D,"border-top-color":F,"border-left-color":F,"border-right-color":F,"border-bottom-color":F},250).delay(1200).animate({"background-color":A,"border-top-color":G,"border-left-color":G,"border-right-color":G,"border-bottom-color":G},500);setTimeout(function(){AJS.$(B).stop().css({"background-color":"","border-top-color":"","border-left-color":"","border-right-color":"","border-bottom-color":""})},1950)};GH.Notification.handleDateFormatMismatchError=function(C){var B='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';B+="Advanced Settings";B+="</a>";var A=AJS.format("It appears your JIRA date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",B);GH.Notification.showWarnings(A,{autoHide:false,preRendered:true})};GH.Notification.auiMessage=function(B){var A=_.extend({type:"generic",icon:true,messageHtml:false},B);return GH.tpl.rapid.notification.renderAuiMessage({type:A.type,title:A.title,icon:A.icon,messageHtml:A.messageHtml,message:A.message})};GH.Notification.Handler={_defaultNotificationHandler:function(){var A=AJS.$("<div/>");AJS.$(".global-msg").remove();A.addClass("global-msg").appendTo("body");return A},_defaultDivStyleHandler:function(A){return{marginLeft:-A.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(A){this._customDivStyleHandler=A;this._useDefault=false},_useDefault:true,setCustomNotificationHandler:function(A){this._customNotificationHandler=A;this._useDefault=false},removeCustomHandlers:function(){this._useDefault=true},getNotificationHandler:function(){if(!this._useDefault&&this._customNotificationHandler!=null){return this._customNotificationHandler}else{return this._defaultNotificationHandler}},getDivStyleHandler:function(){if(!this._useDefault&&this._customDivStyleHandler!=null){return this._customDivStyleHandler}else{return this._defaultDivStyleHandler}}};GH.Notification._divStyle=function(B){var A=GH.Notification.Handler.getDivStyleHandler();return A(B)};GH.Notification.prepareNotificationDiv=function(){var A=GH.Notification.Handler.getNotificationHandler();return A()};GH.Notification.showSuccess=function(D,B){clearTimeout(GH.Notification.current);var A={timeout:5000,closeable:true,shadowed:true};B=_.extend(A,B,{body:D});var C=GH.Notification.prepareNotificationDiv();AJS.messages.success(C,B);if(GH.Notification._divStyle(C)){C.css(GH.Notification._divStyle(C))}C.show();GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},B.timeout)};GH.Notification.showIssueMessage=function(D){var C=JIRA.SessionStorage;var B=null;var A=null;if(!D){D=C.getItem("selectedIssueId")}if(D){A=C.getItem("selectedIssueKey");B=C.getItem("selectedIssueMsg");GH.Notification.showIssueMessageImpl(D,B,A)}C.removeItem("selectedIssueId");C.removeItem("selectedIssueKey");C.removeItem("selectedIssueMsg")};GH.Notification.showIssueMessageImpl=function(D,C,A){if(!C){C="thanks_issue_updated"}var B=AJS.params[C];if(B&&A){B=AJS.format(B,A);GH.Notification.showSuccess(B)}};GH.Notification.addPageLoadMessage=function(C,A){var B=GH.storage.get("gh.pageloadmessages",true)||[];B.push({message:C,type:A||"success"});GH.storage.put("gh.pageloadmessages",B,true)};GH.Notification._displayPageLoadMessages=function(){var C=GH.storage.get("gh.pageloadmessages",true);if(C){var A=C[0].type;var B="";_.each(C,function(D){if(B.length>0){B+="<br>"}B+=D.message});switch(A){case"warning":GH.Notification.showWarning(B);break;case"success":default:GH.Notification.showSuccess(B);break}GH.storage.put("gh.pageloadmessages",null,true)}};GH.Notification.showBoardUpdatedMessage=function(){GH.Notification.clearBoardUpdatedMessage();var B=AJS.$.Deferred();var A=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");A.data("deferred",B);A.find(".js-refresh-now").click(function(C){C.preventDefault();A.removeData("deferred");GH.Notification.clearBoardUpdatedMessage();B.resolve()});A.find(".js-ignore-refresh").click(function(C){C.preventDefault();GH.Notification.clearBoardUpdatedMessage()});AJS.$(".ghx-feedback").css({visibility:"hidden"});return B.promise()};GH.Notification.clearBoardUpdatedMessage=function(){var A=AJS.$("#ghx-update-message");if(A.length){var B=A.data("deferred");if(B&&B.reject){B.reject()}A.remove()}AJS.$(".ghx-feedback").css({visibility:""})};GH.Notification.isBoardUpdatedMessageVisible=function(){var A=AJS.$("#ghx-update-message");return A.length>0};AJS.$(document).ready(function(){GH.Notification.showIssueMessage();if(GH.storage){GH.Notification._displayPageLoadMessages()}});
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.errors.length > 1) {
    output.append('<ul>');
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output.append('<li>', (errorData6.noAutoescape) ? errorData6.message : soy.$$escapeHtml(errorData6.message), '</li>');
    }
    output.append('</ul>');
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output.append('<p>', (errorData18.noAutoescape) ? errorData18.message : soy.$$escapeHtml(errorData18.message), '</p>');
    }
  }
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output.append('<div class="ghx-error">', soy.$$escapeHtml(errorData29.message), '</div>');
  }
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="ghx-body-warning">', soy.$$escapeHtml(AJS.format("This version of {0} is not a supported browser.",opt_data.browser)), ' <a href="', soy.$$escapeHtml(opt_data.docsUrl), '">', soy.$$escapeHtml("See our documentation for the list of supported browsers."), '</a></div>');
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message ', soy.$$escapeHtml(opt_data.type), '">', (opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '', (opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? opt_data.message : soy.$$escapeHtml(opt_data.message)) + '</p>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="ghx-update-message" class="ghx-tv-message"><p>', soy.$$escapeHtml("This board has been updated"), ': <a href="" class="js-refresh-now">', soy.$$escapeHtml("Refresh"), '</a><span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">', soy.$$escapeHtml("Ignore"), '</a></p></div>');
  return opt_sb ? '' : output.toString();
};

GH.Ajax={};GH.Ajax.CONTEXT_PATH="";GH.Ajax.REST_URL_BASE="/rest/greenhopper/1.0";GH.Ajax.xhrRegistery={};GH.Ajax.stallTimeout=300;GH.Ajax.get=function(A,C){AJS.$.extend(A,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var B=GH.Ajax._executeGet(A,C);return B.pipe(function(D,F,E){return AJS.$.Deferred().resolveWith(this,[D.success,F,E])})};GH.Ajax.post=function(A){A=GH.Ajax._getSettings(A,true);AJS.$.extend(A,{type:"POST",contentType:"application/json"});return GH.Ajax._executeStore(A)};GH.Ajax.put=function(A){A=GH.Ajax._getSettings(A,true);A.type="PUT";return GH.Ajax._executeStore(A)};GH.Ajax.del=function(A){A=GH.Ajax._getSettings(A,true);A.type="DELETE";return GH.Ajax._executeStore(A)};GH.Ajax._getSettings=function(A,B){if(!A.bareUrl&&A.url){A.bareUrl=GH.Ajax.buildRestUrl(A.url)}if(A.bareUrl){A.url=A.bareUrl}if(!A.dataType){A.dataType="json"}if(A.data&&B){A.data=JSON.stringify(A.data)}A.contentType="application/json";return A};GH.Ajax._getXhrData=function(B){var A={timestamp:0};if(B){if(GH.Ajax.xhrRegistery[B]){A=GH.Ajax.xhrRegistery[B]}else{A=GH.Ajax.xhrRegistery[B]=A}}return A};GH.Ajax._executeGet=function(C,G){C=GH.Ajax._getSettings(C);var B=GH.Ajax._getXhrData(G);if(B.xhr){GH.log("aborting request for "+G,GH.Logger.Contexts.ajax);B.xhr.abort();delete B.xhr;delete B.xhrAbort;delete B.timeoutId}var F=B.timestamp;B.timestamp=new Date().getTime();if(B.timestamp-F<GH.Ajax.stallTimeout){GH.log("stalling request for "+G+", time since last request: "+(B.timestamp-F),GH.Logger.Contexts.ajax);var A=AJS.$.Deferred();var E;var D=function(){E=GH.Ajax._executeGet(C,G);E.then(A.resolve,A.reject)};B.timeoutId=window.setTimeout(D,GH.Ajax.stallTimeout);B.xhr=A.promise();B.xhr.abort=function(){if(E){E.abort.apply(E,arguments)}else{clearTimeout(B.timeoutId)}}}else{GH.log("executing request for "+G,GH.Logger.Contexts.ajax);B.xhr=GH.Ajax.makeRequest(C)}B.xhrAbort=B.xhr.abort;B.xhr.abort=function(){var I=B.xhr;var H=B.xhrAbort;if(I&&H){return H.apply(I,arguments)}};B.xhr.done(function(){if(B.xhr){delete B.xhr}}).fail(function(){if(B.xhr){delete B.xhr}});return B.xhr};GH.Ajax._executeStore=function(B){B=B||{};if(B.data&&typeof (B.data)==="string"){if(/\?\?/.test(B.data)){var A="\\u003F\\u003F";B.data=B.data.replace(/\?\?/g,A)}}B.dataType="json";return GH.Ajax.makeRequest(B)};GH.Ajax.makeRequest=function(D){var A=AJS.$.Deferred();D=_.extend(D,{success:function(){A.resolveWith(this,arguments)},error:function(){A.rejectWith(this,arguments)}});var C=A.promise(JIRA.SmartAjax.makeRequest(D));var E=C.abort;C.abort=function(){C.abortMarker=true;return E.apply(C,arguments)};var B=C.pipe(GH.Ajax._generateDoneInterceptor(),GH.Ajax._generateFailInterceptor(D.errorsNoAutoEscape));if(!D.deferErrorHandling){B.fail(GH.Ajax._generateErrorHandler(D.onGlobalError,D.errorContextMap,D.contextualErrorRenderer,D.globalErrorDismissable))}return B};GH.Ajax._generateDoneInterceptor=function(){return function(A,C,B){A=A||{};A=GH.Ajax._createExtendedResult(A);if(!GH.Ajax.matchesCurrentUser(B)){return GH.Ajax._handleCurrentUserChanged(B)}if(!A.isSuccess()){return AJS.$.Deferred().rejectWith(this,[A,B,C,null])}return AJS.$.Deferred().resolveWith(this,[A,C,B])}};GH.Ajax._generateFailInterceptor=function(A){return function(D,G,F){if(D.abortMarker){return AJS.$.Deferred()}if(!GH.Ajax.matchesCurrentUser(D)){return GH.Ajax._handleCurrentUserChanged(D)}var C={},B=null;if(D.responseText){try{C=JSON.parse(D.responseText)}catch(E){}}if(C.errors||C.errorMessages){B=GH.Ajax._convertJiraErrors(C,A)}else{if(C.message){B=GH.Ajax._convertFrameworkErrors(C)}}if(!B){B=GH.Ajax._convertGenericErrors(D,F)}return AJS.$.Deferred().rejectWith(this,[B,D,G,F])}};GH.Ajax.handleContextualErrors=function(B,A,C){A=A||{};if(!B.hasContextualErrors()){return false}AJS.$(B.getContextualErrors()).each(function(E,F){var D=A[F.contextId];if(!D){AJS.$(F.errors).each(function(H,I){B.addGlobalError(I)})}else{if(AJS.$.isFunction(D)){D(F,B)}else{D=AJS.$(D);D.siblings(".ghx-error").remove();var G;if(C){G=C(F)}else{G=GH.tpl.rapid.notification.renderContextualErrors({errors:F.errors})}D.after(G)}}});return true};GH.Ajax.handleGlobalErrors=function(C,B,A){if(!C.hasGlobalErrors()){return false}GH.Notification.showErrors({errors:C.getGlobalErrors()},A);if(B&&(B instanceof Function)){B(C)}return true};GH.Ajax.buildRestUrl=function(A){if(A.indexOf("/")!==0){A="/"+A}return GH.Ajax.buildBareRestUrl(GH.Ajax.REST_URL_BASE+A)};GH.Ajax.buildBareRestUrl=function(A){if(A.indexOf("/")!==0){A="/"+A}return GH.Ajax.CONTEXT_PATH+A};GH.Ajax._createExtendedResult=function(A){if(!A){return GH.Ajax._extendResult({success:true})}else{return GH.Ajax._extendResult({success:A})}};GH.Ajax._extendResult=function(A){return AJS.$.extend(A,{getGlobalErrors:function(){return A.error?A.error.errors:null},getContextualErrors:function(){return A.error?A.error.contextualErrors:null},hasGlobalErrors:function(){return A.error&&A.error.errors&&A.error.errors.length>0},hasContextualErrors:function(){return A.error&&A.error.contextualErrors},addGlobalError:function(B){if(!A.error){A.error={}}if(!A.error.errors){A.error.errors=[]}A.error.errors[A.error.errors.length]=B},getSuccessObject:function(){return A.success},isSuccess:function(){return !A.error}})};GH.Ajax._generateErrorHandler=function(D,B,C,A){return function(E){GH.Ajax.handleContextualErrors(E,B,C);GH.Ajax.handleGlobalErrors(E,D,A)}};GH.Ajax._convertJiraErrors=function(A,E){var C=A.errorMessages?A.errorMessages:[];C=_.map(C,function(F){return{message:F,noAutoescape:E}});var B=A.errors?A.errors:{};B=_.map(B,function(G,F){return{contextId:F,errors:[{message:G,noAutoescape:E}]}});var D={error:{errors:C,contextualErrors:B}};return GH.Ajax._extendResult(D)};GH.Ajax._convertFrameworkErrors=function(A){var B={error:{errors:[{message:A.message}],contextualErrors:[]}};return GH.Ajax._extendResult(B)};GH.Ajax._convertGenericErrors=function(B,C){var A=GH.Ajax._extendResult({});if(B.responseText){GH.log("Got an error response with text that we don't know how to parse: "+B.responseText)}if(B.status===0&&C==="abort"){A.addGlobalError({message:"Request timed out"})}else{if(C){A.addGlobalError({message:C})}else{GH.log("Got an Ajax request error response with empty 'errorThrown' value. Silently logging")}}return A};GH.Ajax._hasUsernameResponseHeader=function(A){return !!A.getResponseHeader("X-AUSERNAME")};GH.Ajax._getUserForResponse=function(A){return A.getResponseHeader("X-AUSERNAME")?decodeURIComponent(A.getResponseHeader("X-AUSERNAME")):"anonymous"};GH.Ajax.getUserFromAJS=function(){return(AJS.params.loggedInUser)?AJS.params.loggedInUser:"anonymous"};GH.Ajax.matchesCurrentUser=function(A){return !A.getResponseHeader||!A.getAllResponseHeaders||!GH.Ajax._hasUsernameResponseHeader(A)||GH.Ajax.getUserFromAJS()===GH.Ajax._getUserForResponse(A)||(A.status===204&&!A.getAllResponseHeaders()&&AJS.$.browser.msie)};GH.Ajax._handleCurrentUserChanged=function(C){var B=GH.Ajax.getUserFromAJS();var A=GH.Ajax._getUserForResponse(C);if(B!=="anonymous"&&A==="anonymous"){GH.log("User changed. original: "+B+" new: "+A+". Redirecting to the login page");location.href=GH.RapidBoard.getLoginUrl()}else{GH.log("User changed. original: "+B+" new: "+A+". Reloading the page");location.reload()}return AJS.$.Deferred()};
GH.QuickCreateIssueInEpic={};GH.QuickCreateIssueInEpic.epicKey=null;GH.QuickCreateIssueInEpic.epicName=null;AJS.$(function(){GH.QuickCreateIssueInEpic.init();JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(C,A,B){if(B===JIRA.CONTENT_ADDED_REASON.pageLoad){GH.QuickCreateIssueInEpic.init()}});AJS.$(document).undelegate("#gh-create-issue-in-epic-lnk","click");AJS.$(document).delegate("#gh-create-issue-in-epic-lnk","click",function(B){var A=GH.QuickCreateIssueInEpic.createQuickCreateIssueForEpicDialog();A.show();B.preventDefault()})});GH.QuickCreateIssueInEpic.init=function(){var A=AJS.$("#ghx-epic-key").text();var D=AJS.$("#ghx-epic-name").text();var C=AJS.$("#ghx-hide-table").text()=="true";GH.QuickCreateIssueInEpic.epicKey=A;GH.QuickCreateIssueInEpic.epicName=D;JIRA.unbind("QuickCreateIssueInEpic.sessionComplete");JIRA.bind("QuickCreateIssueInEpic.sessionComplete",function(F,E){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);GH.QuickCreateIssueInEpic.handleIssuesCreated(E)});if(C){var B=AJS.$("#ghx-issues-in-epic-table");B.addClass("hidden")}};GH.QuickCreateIssueInEpic.createQuickCreateIssueForEpicDialog=function(){var B=new JIRA.Forms.Container(function(){var D={title:AJS.format("Create issue in epic : {0}",GH.QuickCreateIssueInEpic.epicKey),id:"create-issue-in-epic-form",globalEventNamespaces:["QuickCreateIssueInEpic"]};var C=new JIRA.Forms.CreateIssueModel({projectId:D.pid,issueType:D.issueType}),F=new JIRA.Forms.ConfigurableCreateIssueForm({model:C,title:D.title,globalEventNamespaces:D.globalEventNamespaces}),E=new JIRA.Forms.UnconfigurableCreateIssueForm({model:C,title:D.title,globalEventNamespaces:D.globalEventNamespaces});return{globalEventNamespaces:D.globalEventNamespaces,model:C,errorHandler:new JIRA.Forms.CreateIssueError(),configurableForm:F,unconfigurableForm:E}});B.bind("contentRefreshed",function(){AJS.$(document).unbind("QuickCreateIssueInEpic.validationError");AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(D,C){C.setSelection(new AJS.ItemDescriptor({value:"key:"+GH.QuickCreateIssueInEpic.epicKey,label:GH.QuickCreateIssueInEpic.epicName}));setTimeout(function(){C.disable()},0);AJS.$(document).bind("QuickCreateIssueInEpic.validationError",function(E){C.disable()})})});var A=B.asDialog({windowTitle:AJS.format("Create issue in epic : {0}",GH.QuickCreateIssueInEpic.epicKey),id:"create-issue-dialog"});A.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT);AJS.$(document).unbind("QuickCreateIssueInEpic.validationError")});return A};GH.QuickCreateIssueInEpic.handleIssuesCreated=function(B){var A=_.pluck(B,"issueKey");GH.QuickCreateIssueInEpic.addIssuesToEpic(B).done(function(){GH.QuickCreateIssueInEpic.refreshIssuesInEpicTable(A)})};GH.QuickCreateIssueInEpic.addIssuesToEpic=function(B){var A=_.pluck(B,"issueKey");var C={ignoreEpics:true,issueKeys:A};return GH.Ajax.put({url:"/epics/"+GH.QuickCreateIssueInEpic.epicKey+"/add",data:C})};GH.QuickCreateIssueInEpic.refreshIssuesInEpicTable=function(A){var B=AJS.$("#greenhopper-epics-issue-web-panel");B.addClass("updating");AJS.$.ajax({url:contextPath+"/secure/ViewIssuesInEpic.jspa?epicKey="+GH.QuickCreateIssueInEpic.epicKey}).done(function(D){B.find(".mod-content").html(D);JIRA.Dropdowns.bindIssueActionsDds(B);AJS.$.each(A,function(G,F){B.find(".issuerow[data-issuekey='"+F+"']").fadeInBackground()});var C=AJS.$("#ghx-issues-in-epic-table");var E=AJS.$("#ghx-hide-table").text()=="true";if(E){C.addClass("hidden")}else{AJS.$("#ghx-issues-in-epic-empty-message").remove();C.removeClass("hidden")}B.removeClass("updating")})};
